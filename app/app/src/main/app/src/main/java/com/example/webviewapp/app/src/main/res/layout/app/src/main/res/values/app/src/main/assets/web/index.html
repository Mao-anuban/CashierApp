<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      margin: 0; padding: 3vw;
      background: #f8f9fa;
      text-align: center;
    }
    h2 { margin-bottom: 3vw; color: #333; font-size: 6vw; }
    .card {
      background: white; padding: 4vw; margin-bottom: 3vw;
      border-radius: 4vw; box-shadow: 0 1vw 3vw rgba(0,0,0,0.12);
    }
    input {
      font-size: 5vw; padding: 3vw; margin: 2vw 0;
      width: 95%; max-width: 400px;
      border: 2px solid #ccc; border-radius: 3vw;
      text-align: center;
    }
    button {
      font-size: 5vw; padding: 3vw; margin: 2vw 0;
      border: none; border-radius: 3vw;
      cursor: pointer; width: 95%; max-width: 400px;
      transition: 0.2s;
    }
    button.add-btn { background: #007bff; color: white; }
    button.add-btn:hover { background: #0056b3; }
    button.clear-btn { background: #6c757d; color: white; }
    button.clear-btn:hover { background: #494f54; }
    table {
      width: 100%; border-collapse: collapse; margin-top: 1.5vw;
      background: white; border-radius: 3vw; overflow: hidden;
      font-size: 4.5vw;
      text-align: left;
    }
    th, td {
      padding: 2vw; border-bottom: 1px solid #eee;
      text-align: left;
    }
    th { background: #007bff; color: white; font-size: 4.5vw; }
    tr:last-child td { border-bottom: none; }
    .delete-btn {
      background: #dc3545; padding: 1.5vw 3vw; font-size: 4vw;
      border-radius: 2vw; color: white; cursor: pointer;
    }
    .delete-btn:hover { background: #a71d2a; }
    #total {
      font-size: 5vw; margin-top: 3vw; font-weight: bold; color: #28a745;
    }
    #change {
      font-size: 4.5vw; margin-top: 2vw; font-weight: bold; color: #ff5722;
    }
    #itemCount {
      font-size: 3vw; margin-top: 1vw; font-weight: normal; color: #333;
      text-align: left;
    }

    @media (min-width: 600px) {
      h2 { font-size: 2em; }
      input, button { font-size: 1.2em; padding: 12px; }
      table { font-size: 1.1em; }
      #total { font-size: 1.6em; }
      #change { font-size: 1.4em; }
      #itemCount { font-size: 1em; }
    }
  </style>
</head>
<body>
  <h2>üì¶ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</h2>

  <div class="card">
    <input type="number" id="weightInput" step="0.01" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)">
    <input type="number" id="priceInput" step="0.01" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏Å. (‡∏ö‡∏≤‡∏ó)">
    <input type="number" id="manualSumInput" step="0.01" placeholder="‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó) ‡∏Å‡∏£‡∏≠‡∏Å‡πÑ‡∏î‡πâ">
    <button class="add-btn" onclick="addRow()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    <button class="clear-btn" onclick="clearAll()">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>

  <div id="itemCount">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>

  <table>
    <thead>
      <tr>
        <th>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏Å.)</th>
        <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Å‡∏Å.</th>
        <th>‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</th>
        <th>‡∏•‡∏ö</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
  </table>

  <div id="total">‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0 ‡∏ö‡∏≤‡∏ó</div>

  <div class="card">
    <input type="number" id="customerInput" step="0.01" placeholder="‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏ö‡∏≤‡∏ó)" oninput="calculateChange()">
    <div id="change">‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: 0 ‡∏ö‡∏≤‡∏ó</div>
  </div>

  <script>
    let total = 0;

    function formatNumber(val, digits = 2) {
      return isNaN(val) ? "-" : val.toFixed(digits);
    }

    function updateTotal() {
      document.getElementById("total").innerText = "‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: " + Math.ceil(total) + " ‡∏ö‡∏≤‡∏ó";
    }

    function updateItemCount() {
      let count = document.getElementById("list").rows.length;
      document.getElementById("itemCount").innerText = "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: " + count + " ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£";
    }

    function resetInputs() {
      document.getElementById("weightInput").value = "";
      document.getElementById("priceInput").value = "";
      document.getElementById("manualSumInput").value = "";
    }

    function addRow() {
      let weight = parseFloat(document.getElementById("weightInput").value);
      let pricePerKg = parseFloat(document.getElementById("priceInput").value);
      let manualSum = parseFloat(document.getElementById("manualSumInput").value);

      let sum;
      if (!isNaN(manualSum) && manualSum > 0) {
        sum = manualSum;
      } else {
        if (!weight || weight <= 0) weight = NaN;
        if (!pricePerKg || pricePerKg <= 0) pricePerKg = NaN;
        sum = Math.ceil((weight || 0) * (pricePerKg || 0));
      }

      let row = document.createElement("tr");
      row.innerHTML = `
        <td>${formatNumber(weight)}</td>
        <td>${formatNumber(pricePerKg)}</td>
        <td>${sum}</td>
        <td><button class="delete-btn" onclick="deleteRow(this, ${sum})">‡∏•‡∏ö</button></td>
      `;
      document.getElementById("list").appendChild(row);
      total += sum;

      updateTotal();
      updateItemCount();
      resetInputs();
    }

    function deleteRow(btn, sum) {
      total -= sum;
      btn.closest("tr").remove();
      updateTotal();
      updateItemCount();
      calculateChange();
    }

    function clearAll() {
      document.getElementById("list").innerHTML = "";
      total = 0;
      updateTotal();
      updateItemCount();
      document.getElementById("customerInput").value = "";
      document.getElementById("change").innerText = "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: 0 ‡∏ö‡∏≤‡∏ó";
      resetInputs();
    }

    function calculateChange() {
      let customerMoney = parseFloat(document.getElementById("customerInput").value) || 0;
      let change = customerMoney - Math.ceil(total);
      if (change < 0) {
        document.getElementById("change").innerText = "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!";
      } else {
        document.getElementById("change").innerText = "‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: " + change + " ‡∏ö‡∏≤‡∏ó";
      }
    }
  </script>
</body>
</html>
